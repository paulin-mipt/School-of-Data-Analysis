
Дело было в далёком 2004 году. Работал я в одном из подразделений нашего родного Министерства энергетики, сидел админом в библиотеке. Работа была непыльная; на вопросы и просьбы вида «А нам нужно, чтобы скорость базы была повыше» в сороковой раз я лениво отвечал: «А вы мне оплатите стомегабитный 24-портовый свитч». Кстати, 30 компьютеров соединялись с сервером через каскад из пяти восьмипортовых десятимегабитных хабов. Пассивных.День «Х»: закупка оборудования по программе «Электронная Россия» миллиона этак на четыре. Счастье админа! Наш интегратор всё это привёз, а вот когда пришёл черёд это хотя бы собрать, начались заминки: «Ну, нам откат-то за закупку был, а за установку и наладку отдельно…» Начальство бежит ко мне (а я и админ, и наладчик, и эникейщик в одном лице) с вопросом: «А ты сможешь?» Я с тоской и радостью смотрю на три интеловских сервера, аппаратный файрвол, циску, 3Сom-свитчи (разношёрстное прибыло хозяйство) и обещаю подумать. Шеф ласково спрашивает, сколько мне дать премии, чтобы думалось лучше. Я нагло (при окладе в пять тысяч) отвечаю: «Пятьдесят и помощника». Шеф, не моргнув глазом, соглашается и обещает вдобавок пиццу и кофе. Я начинаю думать, что продешевил. Щедрость была объяснима: дали месяц, чтобы со всем этим хозяйством разобраться!Ладно, начали. Собрал шкаф, договорился с провайдером о протяжке сетей, одна незадача: электрики вечером уже пьяные, а утром ещё пьяные. Надо тянуть самому.Приводят мне помощницу. Для экономии средств выделили очаровательное создание из института культуры, проходящее практику, себе на беду. Создание превосходно знало особенности национальной культуры Китая эпохи Цинь, но с проблемой протяжки СКС и разводки силовых линий от подстанции, видимо, столкнулось впервые. Впрочем, Китай тоже пошёл на пользу: весёлыми декабрьскими ночами замечательно разбавлял мануалы по Сisco PIX вперемешку с пиццей, кофе и коньяком (спасибо шефу). Не буду заострять внимание на том, как мы вдвоём радостно лазили по кабельным каналам здания министерства, но, думаю, свою месячную практику девушка запомнит на всю жизнь.26 декабря. Пробный пуск. Настроено уже почти всё: веб-сервер с библиотекой оттестирован и смотрит из DMZ, второй выполняет роль сервера приложений, а так нагрузка небольшая, то заодно и шлюза доступа в инет. Третий настроен под базу. Вот тут и загвоздка: старый «сервер БД» работал под Win2000. База написана на заказ на Visual FoxPro. Платить за переделку базы на SQL у начальства не было ни сил, ни спецов, ни желания, ни денег, да уж очень много на эту базу было завязано. Всё пошло! Политики AD встали, как родные, сайт зашуршал, почта заработала, инет заинтернетил.27-е. Сеть лежит. Начальство, мягко говоря, в непонятках. Ищут виноватого. Я отбрыкиваюсь: месяц ещё не прошел.28-е. Тестируем сеть. Всё как швейцарские часы.29-е. Замечаем прикол: один человек в базе — всё хорошо; два — хватает на полчаса; три — до первой транзакции.30-е. Ловим разработчика БД, наматывая ему… Короче, начальство это умеет.31-е. Перепроверено всё. Программист БД говорит: «Какие на фиг транзакции? БД файловая, тупая до безобразия, работает через флажки приоритета, доступ к файлам идёт только по путям сетевого окружения NetBIOS!»1 января. Сидим втроём. Пиво, водка, коньяк от шефа, пицца и пельмени. Пицца подается на верёвочке на второй этаж: охрана опечатала здание и свалила.3-е. Звоним в представительство техподдержки MS, пытаемся понять, каким образом идёт взаимодействие по протоколу SMB в старых и новых версиях Windows, а главное, почему это сказывается на доступе многих пользователей к файлу?5-е. Нашёлся (протрезвел?) толковый человек, который сказал, что MS свой проект FoxPro закрыло на уровне поддержки Win98, и вообще чудо, что у нас всё это работало даже на Win2000.До десятого пьём, так как выхода не видим. Сервер на Win98? Нас не поймут: на улице 2005-й, в серверной — лицензионный 2003-й.11-е. За два дня до рабочей недели появилась мысль: «А давайте попробуем линукс!» В библиотеке найдена первая попавшаяся книга с диском (Fedora Core, если не ошибаюсь). По мануалу (первый раз в жизни линукс трогали!) поставили SMB-сервер, состыковали его с доменом и запустили. Оказывается, линуксоиды корректно реализовали SMB, и всё пошло на ура.Так я впервые усомнился в непререкаемом авторитете MS в области серверных технологий, познакомился с хорошей девушкой и линуксом, а попутно оригинально встретил Новый год.


