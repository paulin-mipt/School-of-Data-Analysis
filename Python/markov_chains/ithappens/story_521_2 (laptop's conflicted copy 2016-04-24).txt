
Решили мы давеча переехать со старого, нестабильного и медленного VDS на новый, быстрый и сияющий. Перенесли файлы, радуясь ширине канала между серверами, перетащили базы данных, худо-бедно начали запускать всё на новом месте. Вдруг вспомнили, что у нового хостера были какие-то странные ограничения по трафику. Перечитали, задумались: «Трафик предоставляется бесплатно в любых объёмах при условии соблюдения соотношеня входящего к исходящему 1:4». Значит, если с сервера ещё не скачали ничего, а закачали назад столько-то... Калькулятор, перемножив объём «лишнего» трафика на сумму штрафа за мегабайт, выдал неутешительный результат.Проблему стали решать самым простым способом: из недр /dev/urandom извлекли гигабайт бесценного мусора, положили его в файл в корне веб-сервера, а всем сотрудникам фирмы, кто был в сети, разослали такое сообщение:Привет! Нужна помощь. Фирма может влететь на деньги за неправильный расход трафика. А ты можешь всё спасти.Скачай вот этот файл раз десять:wget http://xxx.xxx.xxx.xxx/bigdata.dat -O /dev/nullЗапустил iftop, стал наблюдать. Подключилось четыре потока, процесс пошёл — да вот только уж очень медленно. Самое быстрое, что бывает в нашем городке, — четырёхмегабитный DSL, а потоки загрузки отчего-то оказались ещё медленней. Мы определённо не успевали до полуночи.Тем временем в мессенджере я вёл спокойную беседу с приятелем, в которой между делом рассказал, как мы увлечённо качаем файлы с мусором с пустого сервера, дабы спасти бюджет фирмы. Приятель посмеялся, подумал немного и добавил: «Я тоже могу скачать: у меня ж нынче пятьдесят мегабит».…И пришёл спаситель!


