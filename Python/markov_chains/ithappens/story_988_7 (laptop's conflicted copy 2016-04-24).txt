
Дело было во времена моего эникейства. Был у нас на заводе (да чего был — до сих пор там работает) супер-мега-админ — Вадык. Именно так. Комплекс Бога во все щели при крайне скудных знаниях в области системного администрирования, ограничивающихся линейкой «окон».Писал я здесь когда-то, как это чудо заблокировало 80-й порт для «простых смертных», включая нас, оставив открытыми все остальные. Тогда я решил вопрос с помощью установки Squid у себя дома.Наконец-то осознав, что сделал что-то не так, наш гений докумекал закрыть всё. Мы опять расстроились. Но директорат, понятное дело, к простым смертным не относился. А поскольку Вадык всех директоров боялся до усрачки, он оставил для них открытым всё и вся с фильрацией по МАС-адресу.Это и стало его главной ошибкой. Вадык верил (и, судя по всему, верит до сих пор), что МАС-адрес — это такая штука, которая намертво вшивается в сетевой девайс, и изменить её ну никак нельзя.А что такое эникейщик? Это не только то существо из IT-мира, которое абсолютно безнаказанно (ну, почти) может пнуть абсолютно любой юзверь, если у него с первого раза не запустилась «жёлтая программа», но и человек, имеющий учётку локального админа на всех подчинённых ему ПК. Машины генерального и его зама админил сам Вадык, но директоров у нас, как и на любом заводе, было гораздо больше, чем толковых специалистов. Посему остальные диры по самым разным вопросам были в нашей компетенции.Жертву нашли быстро: бывший гендир, ныне почивающий на лаврах по коммерческим вопросам. Подключаемся к диску С:, вырезаем ntldr и ребутим комп с помощью самой популярной программой для удаленного администрирования.— Да, Сан Саныч! Что? Компьютер не работает? Ай-яй-яй… Сейчас-сейчас!Забираем комп дира, меняем ему МАС на свежесгенерённый, а его МАС прописываем на заныканном мною в нашей локалке серваке с Дебианом. Снова поднимаю Squid.Заработал веб, заработал FTP, но мои разгильдяи хотели World of Tanks. «Танки» не работали. В уже работающем вебе полез искать. Ага, вот тут-то мы и знакомимся с TCP и UDP. Казалось бы, решить бы всё изящно, красиво, но в тот момент я был эникейщиком, потому про TCP/UDP я узнал, а про iptables — нет. Тогда я ещё не был в курсе, что инет можно пустить через шлюз. Я знал, как настроить прокси, в эту сторону и пошёл рыть.Запрос в Гугл: «Прокси-сервер, работающий с UDP». Squid не умеет, это не то… О! 3proxy. Всё хорошо, но UDP работает только через SOCKS5. Так, прописываем в браузере порт 1080… Инет, понятное дело, работает, но World of Tanks с пятыми «носками» не дружит.Второй запрос в гугл: «Как заставить программу работать через SOCKS5». Это платное, это тоже… FreeCAP. Настраиваем, прописываем экзешник WoT… «ИСы», «Маусы» — товарищи прилипли к экранам.Прошло с тех пор уже года два. Накопил опыта, знаний, но понял главное: любим мы костыли в нашей работе. Красивые они по-своему. Proxy over proxy, UDP over TCP — а я ведь тогда об этом даже не догадывался.


