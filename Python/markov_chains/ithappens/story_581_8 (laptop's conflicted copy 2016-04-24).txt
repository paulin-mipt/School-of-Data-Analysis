
Есть у нас сервер. Изредка приходится им управлять, заливая на него файлы и запуская программы, желательно через дружелюбный интерфейс. Не желая писать «велосипеды», решили, что проще вызывать WinSCP. Система работала, обрастала «мясом», и вдруг случилась ошибка: при соединении через SFTP программа начала сбоить.Выяснилось вот что. SFTP не может выполнять команды оболочки, и когда нужно запустить программу на сервере, WinSCP поднимает вторую сессию через SSH, попутно выбрасывая в консоль диагностические сообщения наподобие «Подключение» и «Проверка пароля». Эти сообщения и принимаются за результат выполнения программы.Решение оказалось простейшим: «call echo Preved». Ничего не значащая команда гарантирует, что SSH-сессия уже готова и не будет в самый ответственный момент засорять консоль.


